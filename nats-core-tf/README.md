# NATS Core Cluster

## Overview

This project provisions a core NATS instance using the official NATS Helm chart. The configuration is generated by creating a new NATS system in SCP under a dedicated team and project. This deployment uses both auth callout and Operator Mode configuration from SCP.

## Purpose

- Deploy NATS core cluster on Kubernetes
- Configure with SCP-generated operator configuration
- Enable auth callout for authentication
- Set up as hub for leaf node connections
- Configure secure inter-cluster communication

## Dependencies

- Kubernetes cluster (from k8s-tf project)
- Vault instance for certificates (from vault-tf project)
- SCP instance configured (from scp-tf project)
- Terraform >= 1.0
- Helm >= 3.0

## Outputs

- `nats_cluster_url`: Core cluster connection URL
- `operator_jwt`: Operator JWT for the system
- `system_account`: System account credentials
- `leaf_credentials`: Credentials for leaf node connections

## Usage

```bash
terraform init
terraform plan
terraform apply
```

## Configuration

Key components:
- NATS Helm chart deployment
- Operator mode configuration from SCP
- Auth callout service configuration
- TLS certificates from Vault
- Leaf node authorization settings
- Monitoring and metrics endpoints